---
layout: default
---

<div class="post-container">
    <!-- Table of Contents -->
    <aside class="toc-sidebar" id="toc-sidebar">
        <div class="toc-wrapper">
            <h3 class="toc-title">Contents</h3>
            <nav id="toc" class="toc-nav"></nav>
        </div>
    </aside>

    <article class="post">
        <header class="post-header">
            <h1 class="post-title">{{ page.title }}</h1>
            <div class="post-meta">
                <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>
                {% if page.author %} • <span class="author">{{ page.author }}</span>{% endif %}
                {% if page.tags %} • <span class="tags">{{ page.tags | join: ", " }}</span>{% endif %}
            </div>
        </header>

        <div class="post-content">
            {{ content }}
        </div>

        <footer class="post-footer">
            <div class="post-nav">
                {% if page.previous.url %}
                <a href="{{ page.previous.url | relative_url }}" class="prev-post">← {{ page.previous.title }}</a>
                {% endif %}
                {% if page.next.url %}
                <a href="{{ page.next.url | relative_url }}" class="next-post">{{ page.next.title }} →</a>
                {% endif %}
            </div>
        </footer>
    </article>
</div>

<script>
// Generate Table of Contents
document.addEventListener('DOMContentLoaded', function() {
    const content = document.querySelector('.post-content');
    const toc = document.getElementById('toc');
    const headings = content.querySelectorAll('h2, h3');
    
    if (headings.length === 0) {
        document.getElementById('toc-sidebar').style.display = 'none';
        return;
    }
    
    let tocHTML = '<ul class="toc-list">';
    
    headings.forEach((heading, index) => {
        const id = `heading-${index}`;
        heading.id = id;
        const level = heading.tagName.toLowerCase();
        const text = heading.textContent;
        const className = level === 'h3' ? 'toc-item toc-item-h3' : 'toc-item';
        
        tocHTML += `<li class="${className}"><a href="#${id}" class="toc-link" data-target="${id}">${text}</a></li>`;
    });
    
    tocHTML += '</ul>';
    toc.innerHTML = tocHTML;
    
    // Scroll spy functionality
    const links = document.querySelectorAll('.toc-link');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                links.forEach(link => link.classList.remove('active'));
                const activeLink = document.querySelector(`.toc-link[data-target="${entry.target.id}"]`);
                if (activeLink) activeLink.classList.add('active');
            }
        });
    }, {
        rootMargin: '-20% 0px -70% 0px'
    });
    
    headings.forEach(heading => observer.observe(heading));
    
    // Smooth scroll
    links.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('data-target');
            const target = document.getElementById(targetId);
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    });
});
</script>
